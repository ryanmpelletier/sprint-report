<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans" 
             xmlns:osgi="http://www.springframework.org/schema/osgi" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xsi:schemaLocation="http://www.springframework.org/schema/beans 
             http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
             http://www.springframework.org/schema/osgi 
             http://www.springframework.org/schema/osgi/spring-osgi.xsd" 
             default-autowire="autodetect">
             
             
<!--                  <beans:bean id="sprintTimeReportAdapter" class="com.pelletier.valuelist.adapter.jdbc.DefaultJdbcDataAdapter">
			        <beans:property name="sql">
			            <beans:value>SELECT ROUTE_GROUP.NAME, ROUTE_GROUP.ROUTE_GROUP_ID FROM ROUTE_GROUP_MEMBER JOIN ROUTE_GROUP ON ROUTE_GROUP.ROUTE_GROUP_ID = ROUTE_GROUP_MEMBER.ROUTE_GROUP_ID #if($RI)WHERE ROUTING_INDICATOR = :RI #end</beans:value>
			        </beans:property>
			    </beans:bean>
			
			    <beans:bean id="sprintUserTimeReportAdapter" class="com.pelletier.valuelist.adapter.jdbc.DefaultJdbcDataAdapter">
			        <beans:property name="sql">
			            <beans:value>SELECT NAME,FORMAT,STATE,TYPE FROM DEI #if($sortByColumn &amp;&amp; $sortByOrder) ORDER BY $sortByColumn $sortByOrder#end</beans:value>
			        </beans:property>
			    </beans:bean>-->
			    <beans:bean id="jiraJdbcAdapter" class="com.pelletier.plugins.adapter.JiraJdbcAdapter"/>
             
             
               <beans:bean id="valueListService" class="com.pelletier.valuelist.DefaultValuesListService">
                    <beans:property name="adapters">
		            <beans:map>
<!--  		                <beans:entry key="sprintTimeReport" value-ref="sprintTimeReportAdapter"/>
		                <beans:entry key="sprintUserTimeReport" value-ref="sprintUserTimeReportAdapter"/> -->
		                <beans:entry key="jiraJdbcAdapter" value-ref="jiraJdbcAdapter"/>
		            </beans:map>
		        </beans:property>
             </beans:bean>
        
	
	 	<beans:bean id="sprintReportDAO" class="com.pelletier.jira.plugins.data.JdbcResultsDAO">
	 		<beans:property name="dbconfigLocation" value="../Application Data/JIRA/dbconfig.xml"/>
        	<beans:property name="queries">
        		<beans:list>
	        		<beans:value>
	        		SELECT pname, s.name as sprint, DATE_FORMAT(FROM_UNIXTIME(s.START_DATE/1000), '%m/%d/%y %h:%m') as startdate, DATE_FORMAT(FROM_UNIXTIME(s.END_DATE/1000), '%m/%d/%y %h:%m') as enddate, round(sum(wl.timeworked)/60/60,2) as timeworked FROM jiradb.jiraissue i 
					    JOIN jiradb.project p ON (p.ID = i.project)
					    JOIN jiradb.worklog wl ON (wl.issueid = i.ID)
					    JOIN jiradb.ao_60db71_sprint s ON (s.start_date &lt;= unix_timestamp(wl.startdate) * 1000 AND unix_timestamp(wl.startdate) * 1000 &lt;= ifnull(s.COMPLETE_DATE,s.END_DATE))
					    WHERE p.id = ?
				        GROUP BY pname, s.name;
		        	</beans:value>
	        		<beans:value>
					SELECT s.name as sprint, wl.author as author, round(wl.timeworked/60/60,2) as timeworked, wl.startdate as date
						FROM jiradb.jiraissue i 
						JOIN jiradb.project p ON (p.ID = i.project)
						JOIN jiradb.worklog wl ON (wl.issueid = i.ID)
						JOIN jiradb.ao_60db71_sprint s ON (s.start_date &lt;= unix_timestamp(wl.startdate) * 1000 AND unix_timestamp(wl.startdate) * 1000 &lt;= ifnull(s.COMPLETE_DATE,s.END_DATE))
						WHERE p.id = ?
				        AND (s.name LIKE ifnull(?,'%'))
				        AND (wl.author LIKE ifnull(?,'%'))
						ORDER BY s.name, startdate;
	        		</beans:value>
        		</beans:list>
        	</beans:property>
          	<beans:property name="valueListService" ref="valueListService"/>
		</beans:bean>
		
</beans:beans>