<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans" 
             xmlns:osgi="http://www.springframework.org/schema/osgi" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xsi:schemaLocation="http://www.springframework.org/schema/beans 
             http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
             http://www.springframework.org/schema/osgi 
             http://www.springframework.org/schema/osgi/spring-osgi.xsd" 
             default-autowire="autodetect">
        
	
	 	<beans:bean id="sprintReportDAO" class="com.pelletier.jira.plugins.data.JdbcResultsDAO">
	 		<beans:property name="dbconfigLocation" value="../Application Data/JIRA/dbconfig.xml"/>
        	<beans:property name="queries">
        		<beans:list>
	        		<beans:value>
	        		SELECT pname, s.name as sprint, DATE_FORMAT(FROM_UNIXTIME(s.START_DATE/1000), '%m/%d/%y %h:%m') as startdate, DATE_FORMAT(FROM_UNIXTIME(s.END_DATE/1000), '%m/%d/%y %h:%m') as enddate, round(sum(wl.timeworked)/60/60,2) as timeworked FROM jiradb.jiraissue i 
					    JOIN jiradb.project p ON (p.ID = i.project)
					    JOIN jiradb.worklog wl ON (wl.issueid = i.ID)
					    JOIN jiradb.ao_60db71_sprint s ON (s.start_date &lt;= unix_timestamp(wl.startdate) * 1000 AND unix_timestamp(wl.startdate) * 1000 &lt;= ifnull(s.COMPLETE_DATE,s.END_DATE))
					    WHERE p.id = ?
				        GROUP BY pname, s.name;
		        	</beans:value>
	        		<beans:value>
					SELECT s.name as sprint, wl.author as author, round(wl.timeworked/60/60,2) as timeworked, wl.startdate as date
						FROM jiradb.jiraissue i 
						JOIN jiradb.project p ON (p.ID = i.project)
						JOIN jiradb.worklog wl ON (wl.issueid = i.ID)
						JOIN jiradb.ao_60db71_sprint s ON (s.start_date &lt;= unix_timestamp(wl.startdate) * 1000 AND unix_timestamp(wl.startdate) * 1000 &lt;= ifnull(s.COMPLETE_DATE,s.END_DATE))
						WHERE p.id = ?
				        AND (s.name LIKE ifnull(?,'%'))
				        AND (wl.author LIKE ifnull(?,'%'))
						ORDER BY s.name, startdate;
	        		</beans:value>
        		</beans:list>
        	</beans:property>
		</beans:bean>
		
</beans:beans>